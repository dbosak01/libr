<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Basic Library Operations • libr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><script src="../extra.js"></script><meta property="og:title" content="Basic Library Operations">
<meta property="og:description" content="libr">
<meta property="og:image" content="https://libr.r-sassy.org/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">libr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.2.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"></ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/libr.html">Get started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/libr-basics.html">Basic Library Operations</a>
    </li>
    <li>
      <a href="../articles/libr-management.html">Library Management</a>
    </li>
    <li>
      <a href="../articles/libr-datastep.html">Data Step Operations</a>
    </li>
    <li>
      <a href="../articles/libr-disclaimer.html">Disclaimer</a>
    </li>
    <li>
      <a href="../articles/libr-example1.html">Complete Example 1</a>
    </li>
    <li>
      <a href="../articles/libr-example2.html">Complete Example 2</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href=".././articles/libr-faq.html">FAQ</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li>
  <a href="https://github.com/dbosak01/libr/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="libr-basics_files/header-attrs-2.14/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Basic Library Operations</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/dbosak01/libr/blob/master/vignettes/libr-basics.Rmd"><code>vignettes/libr-basics.Rmd</code></a></small>
      <div class="hidden name"><code>libr-basics.Rmd</code></div>

    </div>

    
    
<p>The main motivation for developing the <strong>libr</strong> package
is to create and use data libraries and data dictionaries. These
concepts are useful when dealing with sets of related data files. The
<code><a href="../reference/libname.html">libname()</a></code> function allows you to define a library for an
entire directory of data files. The library can then be manipulated as a
whole using the <code>lib_*</code> functions in the
<strong>libr</strong> package.</p>
<div id="basic-library-operations" class="section level3">
<h3 class="hasAnchor">
<a href="#basic-library-operations" class="anchor"></a>Basic Library Operations</h3>
<p>There are four main <strong>libr</strong> functions for creating and
using a data library:</p>
<ul>
<li><code><a href="../reference/libname.html">libname()</a></code></li>
<li><code><a href="../reference/lib_load.html">lib_load()</a></code></li>
<li><code><a href="../reference/lib_unload.html">lib_unload()</a></code></li>
<li><code><a href="../reference/lib_write.html">lib_write()</a></code></li>
</ul>
<p>The <code><a href="../reference/libname.html">libname()</a></code> function creates a data library. The
function has parameters for the library name and a directory to
associate it with. If the directory has existing data files, those data
files will be automatically loaded into the library. Once in the
library, the data can be accessed using list syntax.</p>
<p>You may create a data library for several different types of files:
‘rds’, ‘Rdata’, ‘rda’, ‘csv’, ‘xlsx’, ‘xls’, ‘sas7bdat’, ‘xpt’, and
‘dbf’. The type of library is defined using the <code>engine</code>
parameter on the <code><a href="../reference/libname.html">libname()</a></code> function. The default data
engine is ‘rds’. The data engines will attempt to identify the correct
data type for each column of data. You may also control the data type of
the columns using the <code>import_specs</code> parameter and the
<code><a href="../reference/specs.html">specs()</a></code> and <code><a href="../reference/import_spec.html">import_spec()</a></code> functions.</p>
<p>If you prefer to access the data via the workspace, call the
<code><a href="../reference/lib_load.html">lib_load()</a></code> function on the library. This function will load
the library data into the parent frame, where it can be accessed using a
two-level (&lt;library&gt;.&lt;dataset&gt;) name.</p>
<p>When you are done with the data, call the <code><a href="../reference/lib_unload.html">lib_unload()</a></code>
function to remove the data from the parent frame and put it back in the
library list. To write any added or modified data to disk, call the
<code><a href="../reference/lib_write.html">lib_write()</a></code> function. The <code><a href="../reference/lib_write.html">lib_write()</a></code> function
will only write data that has changed since the last write.</p>
<p>The following example will illustrate some basic functionality of the
<strong>libr</strong> package regarding the creation of libnames and use
of dictionaries. The example first places some sample data in a temp
directory for illustration purposes. Then the example creates a libname
from the temp directory, loads it into memory, adds data to it, and then
unloads and writes everything to disk:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://libr.r-sassy.org">libr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create temp directory</span></span>
<span><span class="va">tmp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Save some data to temp directory</span></span>
<span><span class="co"># for illustration purposes</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">saveRDS</a></span><span class="op">(</span><span class="va">trees</span>, <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="va">tmp</span>, <span class="st">"trees.rds"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">saveRDS</a></span><span class="op">(</span><span class="va">rock</span>, <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="va">tmp</span>, <span class="st">"rocks.rds"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create library</span></span>
<span><span class="fu"><a href="../reference/libname.html">libname</a></span><span class="op">(</span><span class="va">dat</span>, <span class="va">tmp</span><span class="op">)</span></span>
<span><span class="co"># library 'dat': 2 items</span></span>
<span><span class="co"># - attributes: not loaded</span></span>
<span><span class="co"># - path: C:\Users\User\AppData\Local\Temp\RtmpCSJ6Gc</span></span>
<span><span class="co"># - items:</span></span>
<span><span class="co">#    Name Extension Rows Cols   Size        LastModified</span></span>
<span><span class="co"># 1 rocks       rds   48    4 3.1 Kb 2020-11-05 23:25:34</span></span>
<span><span class="co"># 2 trees       rds   31    3 2.4 Kb 2020-11-05 23:25:34</span></span>
<span></span>
<span><span class="co"># Examine data dictionary for library</span></span>
<span><span class="fu"><a href="../reference/dictionary.html">dictionary</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span></span>
<span><span class="co"># A tibble: 7 x 9</span></span>
<span><span class="co">#   Name  Column Class   Label Description Format Width  Rows   NAs</span></span>
<span><span class="co">#   &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;   &lt;lgl&gt; &lt;lgl&gt;       &lt;lgl&gt;  &lt;lgl&gt; &lt;int&gt; &lt;int&gt;</span></span>
<span><span class="co"># 1 rocks area   integer NA    NA          NA     NA       48     0</span></span>
<span><span class="co"># 2 rocks peri   numeric NA    NA          NA     NA       48     0</span></span>
<span><span class="co"># 3 rocks shape  numeric NA    NA          NA     NA       48     0</span></span>
<span><span class="co"># 4 rocks perm   numeric NA    NA          NA     NA       48     0</span></span>
<span><span class="co"># 5 trees Girth  numeric NA    NA          NA     NA       31     0</span></span>
<span><span class="co"># 6 trees Height numeric NA    NA          NA     NA       31     0</span></span>
<span><span class="co"># 7 trees Volume numeric NA    NA          NA     NA       31     0</span></span>
<span></span>
<span><span class="co"># Load library</span></span>
<span><span class="fu"><a href="../reference/lib_load.html">lib_load</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Examine workspace</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># [1] "dat" "dat.rocks" "dat.trees" "tmp"</span></span>
<span></span>
<span><span class="co"># Use data from the library</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">dat.rocks</span><span class="op">)</span></span>
<span><span class="co">#      area            peri            shape              perm        </span></span>
<span><span class="co"># Min.   : 1016   Min.   : 308.6   Min.   :0.09033   Min.   :   6.30  </span></span>
<span><span class="co"># 1st Qu.: 5305   1st Qu.:1414.9   1st Qu.:0.16226   1st Qu.:  76.45  </span></span>
<span><span class="co"># Median : 7487   Median :2536.2   Median :0.19886   Median : 130.50  </span></span>
<span><span class="co"># Mean   : 7188   Mean   :2682.2   Mean   :0.21811   Mean   : 415.45  </span></span>
<span><span class="co"># 3rd Qu.: 8870   3rd Qu.:3989.5   3rd Qu.:0.26267   3rd Qu.: 777.50  </span></span>
<span><span class="co"># Max.   :12212   Max.   :4864.2   Max.   :0.46413   Max.   :1300.00 </span></span>
<span></span>
<span><span class="co"># Add data to the library</span></span>
<span><span class="va">dat.trees_subset</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">dat.trees</span>, <span class="va">Girth</span> <span class="op">&gt;</span> <span class="fl">11</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Add more data to the library</span></span>
<span><span class="va">dat.cars</span> <span class="op">&lt;-</span> <span class="va">mtcars</span></span>
<span></span>
<span><span class="co"># Unload the library from memory</span></span>
<span><span class="fu"><a href="../reference/lib_unload.html">lib_unload</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Examine workspace again</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># [1] "dat" "tmp"</span></span>
<span></span>
<span><span class="co"># Write the library to disk</span></span>
<span><span class="fu"><a href="../reference/lib_write.html">lib_write</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span></span>
<span><span class="co"># library 'dat': 4 items</span></span>
<span><span class="co"># - attributes: not loaded</span></span>
<span><span class="co"># - path: C:\Users\User\AppData\Local\Temp\RtmpCSJ6Gc</span></span>
<span><span class="co"># - items:</span></span>
<span><span class="co">#           Name Extension Rows Cols   Size        LastModified</span></span>
<span><span class="co"># 1        rocks       rds   48    4 3.1 Kb 2020-11-05 23:37:45</span></span>
<span><span class="co"># 2        trees       rds   31    3 2.4 Kb 2020-11-05 23:37:45</span></span>
<span><span class="co"># 3         cars       rds   32   11 7.3 Kb 2020-11-05 23:37:45</span></span>
<span><span class="co"># 4 trees_subset       rds   23    3 1.8 Kb 2020-11-05 23:37:45</span></span>
<span></span>
<span><span class="co"># Clean up</span></span>
<span><span class="fu"><a href="../reference/lib_delete.html">lib_delete</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Examine workspace again</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># [1] "tmp"</span></span></code></pre></div>
<p>Next: <a href="libr-management.html">Library Management</a></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by David Bosak.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
