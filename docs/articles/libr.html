<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>libr • libr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><script src="../extra.js"></script><meta property="og:title" content="libr">
<meta property="og:description" content="libr">
<meta property="og:image" content="https://libr.r-sassy.org/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">libr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.3.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"></ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../articles/libr.html">Get started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/libr-basics.html">Basic Library Operations</a>
    </li>
    <li>
      <a href="../articles/libr-management.html">Library Management</a>
    </li>
    <li>
      <a href="../articles/libr-datastep.html">Data Step Operations</a>
    </li>
    <li>
      <a href="../articles/libr-disclaimer.html">Disclaimer</a>
    </li>
    <li>
      <a href="../articles/libr-example1.html">Complete Example 1</a>
    </li>
    <li>
      <a href="../articles/libr-example2.html">Complete Example 2</a>
    </li>
    <li>
      <a href="../articles/libr-faq.html">Frequently Asked Questions</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href=".././articles/libr-faq.html">FAQ</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li>
  <a href="https://github.com/dbosak01/libr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>libr</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/dbosak01/libr/blob/HEAD/vignettes/libr.Rmd" class="external-link"><code>vignettes/libr.Rmd</code></a></small>
      <div class="hidden name"><code>libr.Rmd</code></div>

    </div>

    
    
<p>The <strong>libr</strong> package brings the concepts of data
libraries, data dictionaries, and data steps to R.</p>
<ul>
<li>A <strong>data library</strong> is an object used to define and
manage an entire directory of data files.<br>
</li>
<li>A <strong>data dictionary</strong> is a data frame full of
information about a data library, data frame, or tibble.</li>
<li>A <strong>data step</strong> is a mechanism to perform row-by-row
processing of data.</li>
</ul>
<p>These concepts have been available in SAS® software for decades. But
they have not been available in R … until now!</p>
<p>The <strong>libr</strong> package also includes an enhanced equality
operator to make data comparisons more intuitive.</p>
<div class="section level3">
<h3 id="key-functions">Key Functions<a class="anchor" aria-label="anchor" href="#key-functions"></a>
</h3>
<p>The above concepts are implemented in the <strong>libr</strong>
package with four key functions. They are:</p>
<ul>
<li>
<code><a href="../reference/libname.html">libname()</a></code>: Creates a data library</li>
<li>
<code><a href="../reference/dictionary.html">dictionary()</a></code>: Creates a data dictionary</li>
<li>
<code><a href="../reference/datastep.html">datastep()</a></code>: Performs row-by-row processing of data</li>
</ul>
</div>
<div class="section level3">
<h3 id="how-to-use">How to Use<a class="anchor" aria-label="anchor" href="#how-to-use"></a>
</h3>
<p>Let’s look at some simple examples of each of the four functions
above. These examples will be using some sample data. The sample data is
included in the <strong>libr</strong> package, and also available for
download <a href="https://github.com/dbosak01/libr/blob/master/inst/extdata/libr_data.zip" class="external-link">here</a>.</p>
<div class="section level4">
<h4 id="the-libname-function">The <code>libname()</code> Function<a class="anchor" aria-label="anchor" href="#the-libname-function"></a>
</h4>
<p>The <strong>libr</strong> <code><a href="../reference/libname.html">libname()</a></code> function is quite
similar to the SAS® <code>libname</code> statement. The first parameter
is the name of the library. The second parameter is a path to a
directory the library will point to. The third parameter is the engine
with which to read and write the data.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://libr.r-sassy.org">libr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get path to sample data</span></span>
<span><span class="va">pkg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, package <span class="op">=</span> <span class="st">"libr"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Define data library</span></span>
<span><span class="fu"><a href="../reference/libname.html">libname</a></span><span class="op">(</span><span class="va">sdtm</span>, <span class="va">pkg</span>, <span class="st">"csv"</span><span class="op">)</span> </span></code></pre></div>
<p>The <code><a href="../reference/libname.html">libname()</a></code> function above will send two types of
information to the console:</p>
<ul>
<li>The column specifications for each data file imported</li>
<li>A summary print-out of the library</li>
</ul>
<p>The summary print-out looks like this:</p>
<pre><code># library 'sdtm': 8 items
- attributes: csv not loaded
- path: C:/packages/libr/inst/extdata
- items:
  Name Extension Rows Cols     Size        LastModified
1   AE       csv  150   27  88.1 Kb 2020-09-18 14:30:23
2   DA       csv 3587   18 527.8 Kb 2020-09-18 14:30:23
3   DM       csv   87   24  45.1 Kb 2020-09-18 14:30:23
4   DS       csv  174    9  33.7 Kb 2020-09-18 14:30:23
5   EX       csv   84   11    26 Kb 2020-09-18 14:30:23
6   IE       csv    2   14    13 Kb 2020-09-18 14:30:23
7   SV       csv  685   10  69.9 Kb 2020-09-18 14:30:24
8   VS       csv 3358   17   467 Kb 2020-09-18 14:30:24
</code></pre>
<p>The summary displays what type of library it is, where it is located,
and what data (if any) is already in the library directory. In this
case, there are eight ‘csv’ files available.</p>
<p>For each of the eight files, the <code><a href="../reference/libname.html">libname()</a></code> function also
displayed the column specifications used to import the data file. A
column specification looks like this:</p>
<pre><code>$VS

-- Column specification ------------------------------------------
cols(
  STUDYID = col_character(),
  DOMAIN = col_character(),
  USUBJID = col_character(),
  VSSEQ = col_double(),
  VSTESTCD = col_character(),
  VSTEST = col_character(),
  VSPOS = col_character(),
  VSORRES = col_double(),
  VSORRESU = col_character(),
  VSSTRESC = col_double(),
  VSSTRESN = col_double(),
  VSSTRESU = col_character(),
  VSBLFL = col_character(),
  VISITNUM = col_double(),
  VISIT = col_character(),
  VSDTC = col_date(format = ""),
  VSDY = col_double()
)
</code></pre>
<p>The column specification shows how the data was imported. Since ‘csv’
files do not contain well-defined data type information on each of the
columns, the <code><a href="../reference/libname.html">libname()</a></code> function has to guess at the data
types. The column specification shows you what the guesses were. This is
useful information. You should review these column specifications to see
if the <code><a href="../reference/libname.html">libname()</a></code> function guessed correctly. If it did not
guess correctly, you can control the import data types by sending a
<code><a href="../reference/specs.html">specs()</a></code> collection of <code><a href="../reference/import_spec.html">import_spec()</a></code> objects to
the <code>import_specs</code> parameter on the <code><a href="../reference/libname.html">libname()</a></code>
function. See the <code><a href="../reference/specs.html">specs()</a></code> documentation for an example and
additional details.</p>
</div>
<div class="section level4">
<h4 id="accessing-data">Accessing Data<a class="anchor" aria-label="anchor" href="#accessing-data"></a>
</h4>
<p>Observe that there is difference between the SAS®
<code>libname</code> statement and the <strong>libr</strong>
<code><a href="../reference/libname.html">libname()</a></code> function. The difference is that after the SAS®
<code>libname</code> statement is called, the data is immediately
available to your code using two-level (&lt;library&gt;.&lt;dataset&gt;)
syntax.</p>
<p>With the <strong>libr</strong> function, on the other hand, the data
is immediately available using list syntax on the library variable name.
That means you can get to your data using the dollar sign ($), like
this:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># View a dataset</span></span>
<span><span class="va">sdtm</span><span class="op">$</span><span class="va">DM</span></span>
<span><span class="co"># # A tibble: 87 × 24</span></span>
<span><span class="co">#    STUDYID DOMAIN USUBJID SUBJID RFSTDTC    RFENDTC RFXSTDTC RFXENDTC RFICDTC    RFPENDTC</span></span>
<span><span class="co">#    &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;  &lt;date&gt;     &lt;date&gt;  &lt;lgl&gt;    &lt;lgl&gt;    &lt;date&gt;     &lt;date&gt;  </span></span>
<span><span class="co">#  1 ABC     DM     ABC-01… 049    2006-11-07 NA      NA       NA       2006-10-25 NA      </span></span>
<span><span class="co">#  2 ABC     DM     ABC-01… 050    2006-11-02 NA      NA       NA       2006-10-25 NA      </span></span>
<span><span class="co">#  3 ABC     DM     ABC-01… 051    2006-11-02 NA      NA       NA       2006-10-25 NA      </span></span>
<span><span class="co">#  4 ABC     DM     ABC-01… 052    2006-11-06 NA      NA       NA       2006-10-31 NA      </span></span>
<span><span class="co">#  5 ABC     DM     ABC-01… 053    2006-11-08 NA      NA       NA       2006-11-01 NA      </span></span>
<span><span class="co">#  6 ABC     DM     ABC-01… 054    2006-11-16 NA      NA       NA       2006-11-07 NA      </span></span>
<span><span class="co">#  7 ABC     DM     ABC-01… 055    2006-12-06 NA      NA       NA       2006-10-31 NA      </span></span>
<span><span class="co">#  8 ABC     DM     ABC-01… 056    2006-11-28 NA      NA       NA       2006-11-21 NA      </span></span>
<span><span class="co">#  9 ABC     DM     ABC-01… 113    2006-12-05 NA      NA       NA       2006-11-28 NA      </span></span>
<span><span class="co"># 10 ABC     DM     ABC-01… 114    2006-12-14 NA      NA       NA       2006-12-01 NA      </span></span>
<span><span class="co"># #  77 more rows</span></span>
<span><span class="co"># #  14 more variables: DTHDTC &lt;lgl&gt;, DTHFL &lt;lgl&gt;, SITEID &lt;chr&gt;, BRTHDTC &lt;date&gt;, AGE &lt;dbl&gt;,</span></span>
<span><span class="co"># #   AGEU &lt;chr&gt;, SEX &lt;chr&gt;, RACE &lt;chr&gt;, ETHNIC &lt;chr&gt;, ARMCD &lt;chr&gt;, ARM &lt;chr&gt;, ACTARMCD &lt;lgl&gt;,</span></span>
<span><span class="co"># #   ACTARM &lt;lgl&gt;, COUNTRY &lt;lgl&gt;</span></span>
<span><span class="co"># #  Use `print(n = ...)` to see more rows</span></span></code></pre></div>
<p>Using this syntax, your dataset can be passed into any R function.
For example, here we can subset the dataset for a particular
subject:</p>
<pre><code><span><span class="co"># Subset the data</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">sdtm</span><span class="op">$</span><span class="va">DM</span>, <span class="va">SUBJID</span> <span class="op">==</span> <span class="st">'050'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View results</span></span>
<span><span class="va">dat</span></span>
<span><span class="co"># # A tibble: 1 × 24</span></span>
<span><span class="co">#   STUDYID DOMAIN USUBJID  SUBJID RFSTDTC    RFENDTC RFXSTDTC RFXENDTC RFICDTC    RFPENDTC</span></span>
<span><span class="co">#   &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt;    &lt;chr&gt;  &lt;date&gt;     &lt;date&gt;  &lt;lgl&gt;    &lt;lgl&gt;    &lt;date&gt;     &lt;date&gt;  </span></span>
<span><span class="co"># 1 ABC     DM     ABC-01-… 050    2006-11-02 NA      NA       NA       2006-10-25 NA      </span></span>
<span><span class="co"># #   14 more variables: DTHDTC &lt;lgl&gt;, DTHFL &lt;lgl&gt;, SITEID &lt;chr&gt;, BRTHDTC &lt;date&gt;, AGE &lt;dbl&gt;,</span></span>
<span><span class="co"># #   AGEU &lt;chr&gt;, SEX &lt;chr&gt;, RACE &lt;chr&gt;, ETHNIC &lt;chr&gt;, ARMCD &lt;chr&gt;, ARM &lt;chr&gt;, ACTARMCD &lt;lgl&gt;,</span></span>
<span><span class="co"># #   ACTARM &lt;lgl&gt;, COUNTRY &lt;lgl&gt;</span></span></code></pre>
<p>The dollar sign syntax shown above is recommended for the most
memory-efficient programming. If you are writing production code to be
run in batch, use the dollar sign syntax.</p>
</div>
<div class="section level4">
<h4 id="the-lib_load-function">The <code>lib_load()</code> Function<a class="anchor" aria-label="anchor" href="#the-lib_load-function"></a>
</h4>
<p>For convenience, the package also provides a way to get two-level dot
syntax, similar to SAS®. To get the dot syntax, you first have to call
the <code><a href="../reference/lib_load.html">lib_load()</a></code> function.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="../reference/lib_load.html">lib_load</a></span><span class="op">(</span><span class="va">sdtm</span><span class="op">)</span></span>
<span><span class="co"># # library 'sdtm': 8 items</span></span>
<span><span class="co"># - attributes: csv loaded</span></span>
<span><span class="co"># - path: C:/packages/libr/inst/extdata</span></span>
<span><span class="co"># - items:</span></span>
<span><span class="co">#   Name Extension Rows Cols     Size        LastModified</span></span>
<span><span class="co"># 1   AE       csv  150   27  88.1 Kb 2020-09-18 14:30:23</span></span>
<span><span class="co"># 2   DA       csv 3587   18 527.8 Kb 2020-09-18 14:30:23</span></span>
<span><span class="co"># 3   DM       csv   87   24  45.1 Kb 2020-09-18 14:30:23</span></span>
<span><span class="co"># 4   DS       csv  174    9  33.7 Kb 2020-09-18 14:30:23</span></span>
<span><span class="co"># 5   EX       csv   84   11    26 Kb 2020-09-18 14:30:23</span></span>
<span><span class="co"># 6   IE       csv    2   14    13 Kb 2020-09-18 14:30:23</span></span>
<span><span class="co"># 7   SV       csv  685   10  69.9 Kb 2020-09-18 14:30:24</span></span>
<span><span class="co"># 8   VS       csv 3358   17   467 Kb 2020-09-18 14:30:24</span></span></code></pre></div>
<p>Notice on the console printout that the library is now “loaded”. That
means the data has been loaded into the workspace, and is available
using two-level dot syntax. If you are working in
<strong>RStudio</strong>, the environment pane will now show all the
datasets available in the library.</p>
<p><img src="../man/images/lib_load.png"></p>
<p>At this point, you can work with your data very much the same way as
you would in SAS®. You can pass these datasets into statistical
functions, or manipulate them with <strong>dplyr</strong> functions.
Note that you can also work with individual variables on the datasets
using dollar sign (“$”) syntax.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get total number of records</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">sdtm.DM</span><span class="op">)</span></span>
<span><span class="co"># [1] 87</span></span>
<span></span>
<span><span class="co"># Get frequency counts for each arm</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">sdtm.DM</span><span class="op">$</span><span class="va">ARM</span><span class="op">)</span></span>
<span><span class="co"># ARM A          ARM B          ARM C          ARM D SCREEN FAILURE </span></span>
<span><span class="co"># 20             21             21             23              2 </span></span></code></pre></div>
<p>The datasets will be available in the workspace for the length of
your session. If you wish to unload them from the workspace, call the
<code><a href="../reference/lib_unload.html">lib_unload()</a></code> function. See the <code><a href="../reference/lib_load.html">lib_load()</a></code> and
<code><a href="../reference/lib_unload.html">lib_unload()</a></code> documentation for additional information on
these functions.</p>
<p>To see more examples of the <strong>libr</strong> data management
functions, refer to the articles on <a href="libr-basics.html">Basic
Library Operations</a> and <a href="libr-management.html">Library
Management</a>.</p>
</div>
<div class="section level4">
<h4 id="the-dictionary-function">The <code>dictionary()</code> Function<a class="anchor" aria-label="anchor" href="#the-dictionary-function"></a>
</h4>
<p>Once you have a library defined, you may want to examine the column
attributes for the datasets in that library. Examining those column
attributes can be accomplished with the <code><a href="../reference/dictionary.html">dictionary()</a></code>
function. The <code><a href="../reference/dictionary.html">dictionary()</a></code> function returns a tibble of
information about the data in the library.</p>
<p>Continuing from the example above, let’s look at the dictionary for
the ‘sdtm’ library created previously.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/dictionary.html">dictionary</a></span><span class="op">(</span><span class="va">sdtm</span><span class="op">)</span></span>
<span><span class="co"># # A tibble: 130 x 10</span></span>
<span><span class="co">#    Name  Column  Class     Label Description Format Width Justify  Rows   NAs</span></span>
<span><span class="co">#    &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;       &lt;lgl&gt;  &lt;int&gt; &lt;chr&gt;   &lt;int&gt; &lt;int&gt;</span></span>
<span><span class="co">#  1 AE    STUDYID character NA    NA          NA         3 NA        150     0</span></span>
<span><span class="co">#  2 AE    DOMAIN  character NA    NA          NA         2 NA        150     0</span></span>
<span><span class="co">#  3 AE    USUBJID character NA    NA          NA        10 NA        150     0</span></span>
<span><span class="co">#  4 AE    AESEQ   numeric   NA    NA          NA        NA NA        150     0</span></span>
<span><span class="co">#  5 AE    AETERM  character NA    NA          NA        72 NA        150     0</span></span>
<span><span class="co">#  6 AE    AELLT   logical   NA    NA          NA        NA NA        150   150</span></span>
<span><span class="co">#  7 AE    AELLTCD logical   NA    NA          NA        NA NA        150   150</span></span>
<span><span class="co">#  8 AE    AEDECOD character NA    NA          NA        43 NA        150     0</span></span>
<span><span class="co">#  9 AE    AEPTCD  numeric   NA    NA          NA        NA NA        150     0</span></span>
<span><span class="co"># 10 AE    AEHLT   character NA    NA          NA        63 NA        150     0</span></span>
<span><span class="co"># # ... with 120 more rows</span></span></code></pre></div>
<p>The resulting dictionary table shows the name of the dataset, the
column name, and some interesting attributes related to each column. As
you can see, the <strong>libr</strong> dictionary table is overall quite
similar to a SAS® dictionary table. See the <code><a href="../reference/dictionary.html">dictionary()</a></code>
function documentation for more information.</p>
</div>
</div>
<div class="section level3">
<h3 id="the-datastep-function">The <code>datastep()</code> Function<a class="anchor" aria-label="anchor" href="#the-datastep-function"></a>
</h3>
<p>People with experience in SAS® software know that it is sometimes
advantageous to process row-by-row. In SAS®, row-by-row processing done
with a data step. The data step is one of the most fundamental
operations when working in SAS®.</p>
<p>The <strong>libr</strong> package offers a <code><a href="../reference/datastep.html">datastep()</a></code>
function that simulates this style of row-by-row processing. The
function includes several of the most basic parameters available to the
SAS® datastep: keep, drop, rename, retain, and by. Here is a simple
example, again using the data from the library already defined
above:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">age_groups</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/datastep.html">datastep</a></span><span class="op">(</span><span class="va">sdtm.DM</span>, </span>
<span>                       keep <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"USUBJID"</span>, <span class="st">"AGE"</span>, <span class="st">"AGEG"</span><span class="op">)</span>, <span class="op">{</span> </span>
<span>                         </span>
<span>                         <span class="kw">if</span> <span class="op">(</span><span class="va">AGE</span> <span class="op">&gt;=</span> <span class="fl">18</span> <span class="op">&amp;</span> <span class="va">AGE</span> <span class="op">&lt;=</span> <span class="fl">29</span><span class="op">)</span></span>
<span>                           <span class="va">AGEG</span> <span class="op">&lt;-</span> <span class="st">"18 to 29"</span></span>
<span>                         <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">AGE</span> <span class="op">&gt;=</span> <span class="fl">30</span> <span class="op">&amp;</span> <span class="va">AGE</span> <span class="op">&lt;=</span> <span class="fl">44</span><span class="op">)</span></span>
<span>                           <span class="va">AGEG</span> <span class="op">&lt;-</span> <span class="st">"30 to 44"</span></span>
<span>                         <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">AGE</span> <span class="op">&gt;=</span> <span class="fl">45</span> <span class="op">&amp;</span> <span class="va">AGE</span> <span class="op">&lt;=</span> <span class="fl">59</span><span class="op">)</span></span>
<span>                           <span class="va">AGEG</span> <span class="op">&lt;-</span> <span class="st">"45 to 59"</span></span>
<span>                         <span class="kw">else</span> </span>
<span>                           <span class="va">AGEG</span> <span class="op">&lt;-</span> <span class="st">"60+"</span></span>
<span>                         </span>
<span>                       <span class="op">}</span><span class="op">)</span></span>
<span><span class="va">age_groups</span></span>
<span><span class="co"># # A tibble: 87 x 3</span></span>
<span><span class="co">#    USUBJID      AGE AGEG    </span></span>
<span><span class="co">#    &lt;chr&gt;      &lt;dbl&gt; &lt;chr&gt;   </span></span>
<span><span class="co">#  1 ABC-01-049    39 30 to 44</span></span>
<span><span class="co">#  2 ABC-01-050    47 45 to 59</span></span>
<span><span class="co">#  3 ABC-01-051    34 30 to 44</span></span>
<span><span class="co">#  4 ABC-01-052    45 45 to 59</span></span>
<span><span class="co">#  5 ABC-01-053    26 18 to 29</span></span>
<span><span class="co">#  6 ABC-01-054    44 30 to 44</span></span>
<span><span class="co">#  7 ABC-01-055    47 45 to 59</span></span>
<span><span class="co">#  8 ABC-01-056    31 30 to 44</span></span>
<span><span class="co">#  9 ABC-01-113    74 60+     </span></span>
<span><span class="co"># 10 ABC-01-114    72 60+     </span></span>
<span><span class="co"># # ... with 77 more rows</span></span></code></pre></div>
<p>Notice that the <code><a href="../reference/datastep.html">datastep()</a></code> function kept only those
variables specified on the <code>keep</code> parameter. The data step
itself is passed within the curly braces. You can put any number of
conditional statements and assignments inside the curly braces, just
like a SAS® data step. Also like a SAS® data step, you do not need to
‘declare’ new variables. Any name not identified as an R function name
is assumed to be a new variable, and will be created automatically on
the input data.</p>
<p>The datastep function also supports “first.” and “last.”
functionality through use of the <code>by</code> parameter. See
additional examples on the <code><a href="../reference/datastep.html">datastep()</a></code> help page and in the
data step <a href="libr-datastep.html">article</a>.</p>
</div>
<div class="section level3">
<h3 id="next-steps">Next Steps<a class="anchor" aria-label="anchor" href="#next-steps"></a>
</h3>
<p>For next steps, please review the examples provided in the vignette
articles. Those articles include:</p>
<ul>
<li><a href="libr-basics.html">Basic Library Operations</a></li>
<li><a href="libr-management.html">Library Management</a></li>
<li><a href="libr-datastep.html">Data Step Operations</a></li>
<li><a href="libr-example1.html">Complete Example 1</a></li>
<li><a href="libr-example2.html">Complete Example 2</a></li>
</ul>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by David Bosak.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
